"use strict";(self.webpackChunkEscuelaDS=self.webpackChunkEscuelaDS||[]).push([[953],{2953:(dt,M,s)=>{s.r(M),s.d(M,{AdmonRoutes:()=>ut});var e=s(4650),d=s(6895),y=s(4514),v=s(6308),x=s(8739),u=s(5412),c=s(7155),Z=s(3999),C=s(9299),S=s(3546),p=s(9549),b=s(4144),U=s(7392),J=s(266),_=s(4859),O=s(3162);function Q(t,i){1&t&&e._UZ(0,"mat-progress-bar",20)}function I(t,i){1&t&&(e.TgZ(0,"th",21),e._uU(1,"Nombre"),e.qZA())}function Y(t,i){if(1&t&&(e.TgZ(0,"td",22),e._uU(1),e.qZA()),2&t){const o=i.$implicit;e.xp6(1),e.Oqu(o.nombres)}}function P(t,i){1&t&&(e.TgZ(0,"th",21),e._uU(1,"Apellido"),e.qZA())}function D(t,i){if(1&t&&(e.TgZ(0,"td",22),e._uU(1),e.qZA()),2&t){const o=i.$implicit;e.xp6(1),e.Oqu(o.apellidos)}}function z(t,i){1&t&&(e.TgZ(0,"th",23),e._uU(1,"Pais"),e.qZA())}function F(t,i){if(1&t&&(e.TgZ(0,"td",22),e._uU(1),e.qZA()),2&t){const o=i.$implicit;e.xp6(1),e.Oqu(o.pais)}}function L(t,i){1&t&&(e.TgZ(0,"th",23),e._uU(1,"Tropa"),e.qZA())}function w(t,i){if(1&t&&(e.TgZ(0,"td",22),e._uU(1),e.qZA()),2&t){const o=i.$implicit;e.xp6(1),e.hij(" ",o.tropa," ")}}function R(t,i){1&t&&(e.TgZ(0,"th",23),e._uU(1,"Activo"),e.qZA())}const B=function(t,i){return{"text-success":t,"text-danger":i}};function $(t,i){if(1&t&&(e.TgZ(0,"td",24),e._uU(1),e.qZA()),2&t){const o=i.$implicit;e.Q6J("ngClass",e.WLB(2,B,1===o.activo,0===o.activo)),e.xp6(1),e.hij(" ",1===o.activo?"Si":"No"," ")}}function j(t,i){1&t&&e._UZ(0,"th",23)}function H(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"td",22)(1,"mat-icon",25),e.NdJ("click",function(){const l=e.CHM(o).$implicit,m=e.oxw();return e.KtG(m.AddEditPerson("editar",l))}),e._uU(2,"edit"),e.qZA(),e._uU(3,"| "),e.TgZ(4,"mat-icon",26),e.NdJ("click",function(){const l=e.CHM(o).$implicit,m=e.oxw();return e.KtG(m.deletePersona(l))}),e._uU(5,"delete"),e.qZA()()}}function V(t,i){1&t&&e._UZ(0,"tr",27)}function X(t,i){1&t&&e._UZ(0,"tr",28)}const W=function(){return["/Listado/addGuerrero"]},K=function(){return[10,20,50,100]};let ee=(()=>{class t{constructor(){this.dialog=(0,e.f3M)(u.uw),this.dialog_msg=(0,e.f3M)(u.uw),this._apiService=(0,e.f3M)(Z.sM),this._dataService=(0,e.f3M)(Z.gh),this._snackbarService=(0,e.f3M)(Z.o),this.arrayInfo=[],this._tropas=[],this._paises=[],this._capitanes=[],this.loading=!1,this.horizontalPosition="start",this.verticalPosition="bottom",this.displayedColumns=["nombres","apellidos","pais","tropa","activo","acciones"],this.dataSource=new c.by}ngOnInit(){this.data$=this._dataService.sharingObservable,this._subcriptionList=this.data$.subscribe(o=>{this._tropas=o?.arrayData,this.idTropa=o?.idtropa,this.getListadoguerreros(o?.idtropa)})}getListadoguerreros(o){this._apiService.getGuerrerosIdTropa(o).subscribe({next:n=>{this.dataSource.data=n,this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.getPaises()},error:n=>{console.log("error",n)}})}getPaises(){this._apiService.getPaises().subscribe({next:o=>{this._paises=o,this.getCapitanes()},error:o=>{console.log("Error",o)}})}getCapitanes(){this._apiService.getCapitanes().subscribe({next:o=>{this._capitanes=o},error:o=>{console.log("error",o)}})}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.paginator._intl.itemsPerPageLabel="Items por p\xe1gina"}applyFilter(o){this.dataSource.filter=o.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}AddEditPerson(o,n){this.arrayInfo=Object.assign({guerrero:n,tropas:this._tropas,paises:this._paises,capitanes:this._capitanes}),this.dialog.open(ue,{data:{action:o,info:this.arrayInfo},width:"750px",disableClose:!0}).afterClosed().subscribe(l=>{"cancel"!==l.action&&(console.log("resultado",l),"editar"===l.action&&this.editPersona(l.data.id,l.data))})}deletePersona(o){this.dialog_msg.open(de,{data:{action:"delete",info:{id:o.id,nombre:o.nombres}},width:"300px",minHeight:"160px",disableClose:!0}).afterClosed().subscribe(l=>{"cancel"!==l.action&&this._apiService.deletePersona(l.data).subscribe({next:m=>{this._snackbarService.openSnackBar(m.msg,"green"),this.getListadoguerreros(this.idTropa)},error:m=>{console.log("Error",m),this._snackbarService.openSnackBar("Registro no eliminado!.","red")}})})}editPersona(o,n){this._apiService.updatePersona(o,n).subscribe({next:a=>{this._snackbarService.openSnackBar(a.msg,"green"),this.getListadoguerreros(this.idTropa)},error:a=>{console.log("Error",a),this._snackbarService.openSnackBar("Registro no actualizado!.","red")}})}ngOnDestroy(){this._subcriptionList&&this._subcriptionList.unsubscribe()}}return t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-listado-guerreros"]],viewQuery:function(o,n){if(1&o&&(e.Gf(x.NW,5),e.Gf(v.YE,5)),2&o){let a;e.iGM(a=e.CRH())&&(n.paginator=a.first),e.iGM(a=e.CRH())&&(n.sort=a.first)}},standalone:!0,features:[e.jDz],decls:33,vars:8,consts:[["mode","indeterminate",4,"ngIf"],[1,"mat-elevation-z8"],[1,"container"],["matInput","","placeholder","Filtro","autocomplete","off",3,"keyup"],["input",""],["mat-raised-button","","color","primary",3,"routerLink"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","nombres"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","apellidos"],["matColumnDef","pais"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","tropa"],["matColumnDef","activo"],["mat-cell","","class","text-center",3,"ngClass",4,"matCellDef"],["matColumnDef","acciones"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["aria-label","Select page of users",3,"pageSizeOptions"],["mode","indeterminate"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-cell","",1,"text-center",3,"ngClass"],["matTooltip","Editar",1,"btnEdit",3,"click"],["matTooltip","Eliminar",1,"btnDelete",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(o,n){1&o&&(e.YNc(0,Q,1,0,"mat-progress-bar",0),e.TgZ(1,"mat-card",1)(2,"div",2)(3,"mat-card-content")(4,"mat-form-field")(5,"mat-label"),e._uU(6,"Filtro"),e.qZA(),e.TgZ(7,"input",3,4),e.NdJ("keyup",function(l){return n.applyFilter(l)}),e.qZA()(),e.TgZ(9,"button",5),e._uU(10," Agregar "),e.qZA(),e.TgZ(11,"table",6),e.ynx(12,7),e.YNc(13,I,2,0,"th",8),e.YNc(14,Y,2,1,"td",9),e.BQk(),e.ynx(15,10),e.YNc(16,P,2,0,"th",8),e.YNc(17,D,2,1,"td",9),e.BQk(),e.ynx(18,11),e.YNc(19,z,2,0,"th",12),e.YNc(20,F,2,1,"td",9),e.BQk(),e.ynx(21,13),e.YNc(22,L,2,0,"th",12),e.YNc(23,w,2,1,"td",9),e.BQk(),e.ynx(24,14),e.YNc(25,R,2,0,"th",12),e.YNc(26,$,2,5,"td",15),e.BQk(),e.ynx(27,16),e.YNc(28,j,1,0,"th",12),e.YNc(29,H,6,0,"td",9),e.BQk(),e.YNc(30,V,1,0,"tr",17),e.YNc(31,X,1,0,"tr",18),e.qZA(),e._UZ(32,"mat-paginator",19),e.qZA()()()),2&o&&(e.Q6J("ngIf",n.loading),e.xp6(9),e.Q6J("routerLink",e.DdM(6,W)),e.xp6(2),e.Q6J("dataSource",n.dataSource),e.xp6(19),e.Q6J("matHeaderRowDef",n.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",n.displayedColumns),e.xp6(1),e.Q6J("pageSizeOptions",e.DdM(7,K)))},dependencies:[d.ez,d.mk,d.O5,y.q,S.a8,S.dn,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,x.NW,v.YE,v.nU,p.KE,p.hX,b.Nt,U.Hw,J.gM,_.lW,O.pW,C.Bz,C.rH,u.Is],styles:["table[_ngcontent-%COMP%]{width:100%}.mat-mdc-form-field[_ngcontent-%COMP%]{font-size:14px;width:80%;margin-right:10px}.btnEdit[_ngcontent-%COMP%], .btnDelete[_ngcontent-%COMP%]{cursor:pointer}.btnDelete[_ngcontent-%COMP%]{color:#b0304b}.btnEdit[_ngcontent-%COMP%]{color:#4b7bcd}"]}),t})();var r=s(4006),A=s(4385),q=s(9602),E=s(782),T=s(1948),N=s(3238);function te(t,i){1&t&&(e.TgZ(0,"span"),e._uU(1,"El nombre es "),e.TgZ(2,"strong"),e._uU(3,"requerido"),e.qZA()())}function oe(t,i){1&t&&(e.TgZ(0,"span"),e._uU(1," El campo Nombre no debe superar los "),e.TgZ(2,"strong"),e._uU(3,"20 caracteres"),e.qZA()())}function ne(t,i){1&t&&(e.TgZ(0,"span"),e._uU(1,"El apellido es "),e.TgZ(2,"strong"),e._uU(3,"requerido"),e.qZA()())}function ie(t,i){if(1&t&&(e.TgZ(0,"mat-option",22),e._uU(1),e.qZA()),2&t){const o=i.$implicit;e.Q6J("value",o.id),e.xp6(1),e.hij(" ",o.nombre," ")}}function ae(t,i){1&t&&(e.TgZ(0,"span"),e._uU(1,"El pais es "),e.TgZ(2,"strong"),e._uU(3,"requerido"),e.qZA()())}function re(t,i){if(1&t&&(e.TgZ(0,"mat-option",22),e._uU(1),e.qZA()),2&t){const o=i.$implicit;e.Q6J("value",o.idTropa),e.xp6(1),e.hij(" ",o.ntropa," ")}}function le(t,i){1&t&&(e.TgZ(0,"span"),e._uU(1,"La tropa es "),e.TgZ(2,"strong"),e._uU(3,"requerida"),e.qZA()())}function se(t,i){if(1&t&&(e.TgZ(0,"mat-radio-button",22),e._uU(1),e.qZA()),2&t){const o=i.$implicit;e.Q6J("value",o.id),e.xp6(1),e.Oqu(o.name)}}function me(t,i){if(1&t&&(e.TgZ(0,"mat-option",22),e._uU(1),e.qZA()),2&t){const o=i.$implicit;e.Q6J("value",o.id),e.xp6(1),e.AsE(" ",o.nombres," ",o.apellidos," ")}}function ce(t,i){1&t&&(e.TgZ(0,"span"),e._uU(1,"El capit\xe1n es "),e.TgZ(2,"strong"),e._uU(3,"requerido"),e.qZA()())}let ue=(()=>{class t{constructor(o){this.data=o,this.fb=(0,e.f3M)(r.qu),this.dialogRef=(0,e.f3M)(u.so),this.actionProcess="",this._paises=[],this._tropas=[],this._capitanes=[],this._estado=[{id:0,name:"No"},{id:1,name:"Si"}],console.log("data recibida",o),this.actionProcess=o.action,this._infoUpdate=Object.assign(o?.info.guerrero),this._paises=o?.info.paises,this._tropas=o?.info.tropas,this._capitanes=o?.info.capitanes}ngOnInit(){this.initializeValidations()}initializeValidations(){this.form=this.fb.nonNullable.group({id:[null],nombres:["",[r.kI.required]],apellidos:["",r.kI.required],pais:["",r.kI.required],tropa:["",r.kI.required],estado:["",r.kI.required],capitan:[null,r.kI.required]}),this.form.setValue({id:this._infoUpdate.id??null,nombres:this._infoUpdate.nombres??"",apellidos:this._infoUpdate.apellidos??"",pais:this._infoUpdate.idpais??null,tropa:this._infoUpdate.idtropa??null,estado:this._infoUpdate.activo??"",capitan:this._infoUpdate.idcapitan??null})}addEditPerson(){this.form.invalid||this.dialogRef.close({action:this.actionProcess,data:{id:this.form.value.id??null,nombres:this.form.value.nombres,apellidos:this.form.value.apellidos,idpais:this.form.value.pais,idtropa:this.form.value.tropa,idcapitan:this.form.value.capitan,activo:this.form.value.estado}})}cancelar(){this.dialogRef.close({action:"cancel"})}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(u.WI,8))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-modal-action"]],standalone:!0,features:[e.jDz],decls:56,vars:11,consts:[["mat-dialog-title","",1,"text-center"],[3,"formGroup","ngSubmit"],[1,"mat-typography"],[1,"row"],[1,"col-4"],["formControlName","nombres","matInput","","placeholder","Ingrese Nombres","autocomplete","off"],[1,"error"],[4,"ngIf"],["formControlName","apellidos","matInput","","placeholder","Ingrese Apellidos","autocomplete","off"],["appearance","fill"],["formControlName","pais"],[3,"value",4,"ngFor","ngForOf"],[1,"col-3"],["formControlName","tropa"],[1,"mx-5"],[1,"mt-1"],["aria-label","Select an option","formControlName","estado"],[1,"col-6"],["formControlName","capitan"],["align","end",1,"m-buttons"],["type","button","mat-button","","color","warn",1,"m-btncancel",3,"click"],["type","submit","mat-button","","cdkFocusInitial","","color","primary",1,"m-btnaceptar"],[3,"value"]],template:function(o,n){if(1&o&&(e.TgZ(0,"h2",0),e._uU(1,"Informaci\xf3n del guerrero"),e.qZA(),e.TgZ(2,"form",1),e.NdJ("ngSubmit",function(){return n.addEditPerson()}),e.TgZ(3,"mat-dialog-content",2)(4,"div",3)(5,"div",4)(6,"mat-form-field")(7,"mat-label"),e._uU(8,"Nombre"),e.qZA(),e._UZ(9,"input",5),e.qZA(),e.TgZ(10,"div",6),e.YNc(11,te,4,0,"span",7),e.YNc(12,oe,4,0,"span",7),e.qZA()(),e.TgZ(13,"div",4)(14,"mat-form-field")(15,"mat-label"),e._uU(16,"Apellido"),e.qZA(),e._UZ(17,"input",8),e.qZA(),e.TgZ(18,"div",6),e.YNc(19,ne,4,0,"span",7),e.qZA()(),e.TgZ(20,"div",4)(21,"mat-form-field",9)(22,"mat-label"),e._uU(23,"Pais"),e.qZA(),e.TgZ(24,"mat-select",10),e.YNc(25,ie,2,2,"mat-option",11),e.qZA()(),e.TgZ(26,"div",6),e.YNc(27,ae,4,0,"span",7),e.qZA()()(),e.TgZ(28,"div",3)(29,"div",12)(30,"mat-form-field",9)(31,"mat-label"),e._uU(32,"Tropa"),e.qZA(),e.TgZ(33,"mat-select",13),e.YNc(34,re,2,2,"mat-option",11),e.qZA()(),e.TgZ(35,"div",6),e.YNc(36,le,4,0,"span",7),e.qZA()(),e.TgZ(37,"div",12)(38,"mat-label",14),e._uU(39,"Activo"),e.qZA(),e.TgZ(40,"div",15)(41,"mat-radio-group",16),e.YNc(42,se,2,2,"mat-radio-button",11),e.qZA()()(),e.TgZ(43,"div",17)(44,"mat-form-field",9)(45,"mat-label"),e._uU(46,"Capit\xe1n"),e.qZA(),e.TgZ(47,"mat-select",18),e.YNc(48,me,2,3,"mat-option",11),e.qZA()(),e.TgZ(49,"div",6),e.YNc(50,ce,4,0,"span",7),e.qZA()()()(),e.TgZ(51,"mat-dialog-actions",19)(52,"button",20),e.NdJ("click",function(){return n.cancelar()}),e._uU(53," Cancelar "),e.qZA(),e.TgZ(54,"button",21),e._uU(55," Aceptar "),e.qZA()()()),2&o){let a,l,m,g,f,h;e.xp6(2),e.Q6J("formGroup",n.form),e.xp6(9),e.Q6J("ngIf",(null==(a=n.form.get("nombres"))?null:a.hasError("required"))&&(null==(a=n.form.get("nombres"))?null:a.touched)),e.xp6(1),e.Q6J("ngIf",null==(l=n.form.get("nombres"))?null:l.hasError("maxlength")),e.xp6(7),e.Q6J("ngIf",(null==(m=n.form.get("apellidos"))?null:m.hasError("required"))&&(null==(m=n.form.get("apellidos"))?null:m.touched)),e.xp6(6),e.Q6J("ngForOf",n._paises),e.xp6(2),e.Q6J("ngIf",(null==(g=n.form.get("pais"))?null:g.hasError("required"))&&(null==(g=n.form.get("pais"))?null:g.touched)),e.xp6(7),e.Q6J("ngForOf",n._tropas),e.xp6(2),e.Q6J("ngIf",(null==(f=n.form.get("tropa"))?null:f.hasError("required"))&&(null==(f=n.form.get("tropa"))?null:f.touched)),e.xp6(6),e.Q6J("ngForOf",n._estado),e.xp6(6),e.Q6J("ngForOf",n._capitanes),e.xp6(2),e.Q6J("ngIf",(null==(h=n.form.get("capitan"))?null:h.hasError("required"))&&(null==(h=n.form.get("capitan"))?null:h.touched))}},dependencies:[d.ez,d.sg,d.O5,u.Is,u.uh,u.xY,u.H8,_.ot,_.lW,b.c,b.Nt,p.KE,p.hX,A.LD,A.gD,N.ey,q.FA,r.u5,r._Y,r.Fj,r.JJ,r.JL,r.UX,r.sg,r.u,E.N6,T.Fk,T.VQ,T.U0],styles:[".mat-mdc-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%;margin-right:10px}.mat-mdc-radio-button[_ngcontent-%COMP%] ~ .mat-mdc-radio-button[_ngcontent-%COMP%]{margin-left:16px}.m-btnaceptar[_ngcontent-%COMP%], .m-btncancel[_ngcontent-%COMP%]{margin:0 15px}.error[_ngcontent-%COMP%]{color:#f44336;margin-top:-10px;font-size:14px}"]}),t})(),de=(()=>{class t{constructor(o,n){this.dialogRef=o,this.data=n,this.actionProcess="",this._name="",console.log("Data en el Modal",n),this._name=n.info?.nombre}deletePerson(){this.dialogRef.close({action:this.actionProcess,data:this.data.info?.id})}cancelar(){this.dialogRef.close({action:"cancel"})}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(u.so),e.Y36(u.WI,8))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-alert-msg"]],standalone:!0,features:[e.jDz],decls:14,vars:1,consts:[["mat-dialog-title","",1,"text-center","bg-secondary","bg-opacity-10"],["mat-dialog-content","",1,"text-center","container"],[1,"text-danger"],["mat-dialog-actions",""],[1,"float-end","mt-4"],["mat-stroked-button","","mat-dialog-close","",1,"m-btncanel",3,"click"],["mat-stroked-button","","cdkFocusInitial","","color","warn",1,"m-btnaceptar",3,"click"]],template:function(o,n){1&o&&(e.TgZ(0,"h1",0),e._uU(1," Eliminaci\xf3n registro\n"),e.qZA(),e.TgZ(2,"div",1),e._uU(3," Desea eliminar a: "),e._UZ(4,"br"),e.TgZ(5,"span",2),e._uU(6),e.qZA(),e._uU(7,"?\n"),e.qZA(),e.TgZ(8,"div",3)(9,"div",4)(10,"button",5),e.NdJ("click",function(){return n.cancelar()}),e._uU(11," Cancel "),e.qZA(),e.TgZ(12,"button",6),e.NdJ("click",function(){return n.deletePerson()}),e._uU(13," Si "),e.qZA()()()),2&o&&(e.xp6(6),e.Oqu(n._name))},dependencies:[d.ez,_.ot,_.lW],styles:[".m-btnaceptar[_ngcontent-%COMP%], .m-btncanel[_ngcontent-%COMP%]{margin:0 15px}"]}),t})();function pe(t,i){1&t&&(e.TgZ(0,"span"),e._uU(1,"El nombre es "),e.TgZ(2,"strong"),e._uU(3,"requerido"),e.qZA()())}function _e(t,i){1&t&&(e.TgZ(0,"span"),e._uU(1," El campo Nombre no debe superar los "),e.TgZ(2,"strong"),e._uU(3,"20 caracteres"),e.qZA()())}function ge(t,i){1&t&&(e.TgZ(0,"span"),e._uU(1,"El apellido es "),e.TgZ(2,"strong"),e._uU(3,"requerido"),e.qZA()())}function fe(t,i){if(1&t&&(e.TgZ(0,"mat-option",17),e._uU(1),e.qZA()),2&t){const o=i.$implicit;e.Q6J("value",o.id),e.xp6(1),e.hij(" ",o.nombre," ")}}function he(t,i){1&t&&(e.TgZ(0,"span"),e._uU(1,"El pais es "),e.TgZ(2,"strong"),e._uU(3,"requerido"),e.qZA()())}function Ze(t,i){if(1&t&&(e.TgZ(0,"mat-option",17),e._uU(1),e.qZA()),2&t){const o=i.$implicit;e.Q6J("value",o.idTropa),e.xp6(1),e.hij(" ",o.ntropa," ")}}function be(t,i){1&t&&(e.TgZ(0,"span"),e._uU(1,"La tropa es "),e.TgZ(2,"strong"),e._uU(3,"requerida"),e.qZA()())}function Te(t,i){if(1&t&&(e.TgZ(0,"mat-option",17),e._uU(1),e.qZA()),2&t){const o=i.$implicit;e.Q6J("value",o.id),e.xp6(1),e.AsE(" ",o.nombres," ",o.apellidos," ")}}function ve(t,i){1&t&&(e.TgZ(0,"span"),e._uU(1,"El capit\xe1n es "),e.TgZ(2,"strong"),e._uU(3,"requerida"),e.qZA()())}const Ce=function(){return["/Listado/Guerreros"]};let Ae=(()=>{class t{constructor(){this.fb=(0,e.f3M)(r.qu),this._apiService=(0,e.f3M)(Z.sM),this._snackbarService=(0,e.f3M)(Z.o),this._router=(0,e.f3M)(C.F0),this._paises=[],this._tropas=[],this._capitanes=[]}ngOnInit(){this.initializeValidations(),this.getPaises()}initializeValidations(){this.form=this.fb.nonNullable.group({nombres:["",r.kI.required],apellidos:["",r.kI.required],idpais:["",r.kI.required],idtropa:["",r.kI.required],idcapitan:["",r.kI.required],idseguimiento:[null],activo:[null]})}getPaises(){this._apiService.getPaises().subscribe({next:o=>{this._paises=o},complete:()=>{this.getTropas()},error:o=>{console.log("Error",o)}})}getTropas(){this._apiService.getTropas().subscribe({next:o=>{this._tropas=o},complete:()=>{this.getCapitanes()},error:o=>{console.log("error",o)}})}getCapitanes(){this._apiService.getCapitanes().subscribe({next:o=>{this._capitanes=o},error:o=>{console.log("error",o)}})}addPerson(){this.form.controls.activo.setValue(1),this.form.controls.idseguimiento.setValue(null),this.form.invalid||this._apiService.addPersona({activo:this.form.value.activo,apellidos:this.form.value.apellidos,nombres:this.form.value.nombres,idpais:this.form.value.idpais,idtropa:this.form.value.idtropa,idcapitan:this.form.value.idcapitan,idseguimiento:this.form.value.idseguimiento}).subscribe({next:n=>{this._snackbarService.openSnackBar(n.msg,"green"),this._router.navigate(["/Listado/Guerreros"])},error:n=>{console.log("Error",n)}})}}return t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-add-guerrero"]],standalone:!0,features:[e.jDz],decls:49,vars:12,consts:[["mat-dialog-title","",1,"text-center"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-4"],["appearance","fill"],["formControlName","nombres","matInput","","placeholder","Ingrese Nombre","autocomplete","off"],[1,"error"],[4,"ngIf"],["formControlName","apellidos","matInput","","placeholder","Ingrese Apellido","autocomplete","off"],["formControlName","idpais"],[3,"value",4,"ngFor","ngForOf"],["formControlName","idtropa"],[1,"col"],["formControlName","idcapitan"],[1,"float-end","mt-4"],["type","button","mat-raised-button","",1,"m-btncanel",3,"routerLink"],["mat-raised-button","","color","primary","type","submit",1,"m-btnaceptar"],[3,"value"]],template:function(o,n){if(1&o&&(e.TgZ(0,"h2",0),e._uU(1,"Agregar un Guerrero"),e.qZA(),e.TgZ(2,"form",1),e.NdJ("ngSubmit",function(){return n.addPerson()}),e.TgZ(3,"div",2)(4,"div",3)(5,"mat-form-field",4)(6,"mat-label"),e._uU(7,"Nombre"),e.qZA(),e._UZ(8,"input",5),e.qZA(),e.TgZ(9,"div",6),e.YNc(10,pe,4,0,"span",7),e.YNc(11,_e,4,0,"span",7),e.qZA()(),e.TgZ(12,"div",3)(13,"mat-form-field",4)(14,"mat-label"),e._uU(15,"Apellido"),e.qZA(),e._UZ(16,"input",8),e.qZA(),e.TgZ(17,"div",6),e.YNc(18,ge,4,0,"span",7),e.qZA()(),e.TgZ(19,"div",3)(20,"mat-form-field",4)(21,"mat-label"),e._uU(22,"Pais"),e.qZA(),e.TgZ(23,"mat-select",9),e.YNc(24,fe,2,2,"mat-option",10),e.qZA()(),e.TgZ(25,"div",6),e.YNc(26,he,4,0,"span",7),e.qZA()()(),e.TgZ(27,"div",2)(28,"div",3)(29,"mat-form-field",4)(30,"mat-label"),e._uU(31,"Tropa"),e.qZA(),e.TgZ(32,"mat-select",11),e.YNc(33,Ze,2,2,"mat-option",10),e.qZA()(),e.TgZ(34,"div",6),e.YNc(35,be,4,0,"span",7),e.qZA()(),e.TgZ(36,"div",12)(37,"mat-form-field",4)(38,"mat-label"),e._uU(39,"Capitanes"),e.qZA(),e.TgZ(40,"mat-select",13),e.YNc(41,Te,2,3,"mat-option",10),e.qZA()(),e.TgZ(42,"div",6),e.YNc(43,ve,4,0,"span",7),e.qZA()()(),e.TgZ(44,"div",14)(45,"button",15),e._uU(46," Cancelar "),e.qZA(),e.TgZ(47,"button",16),e._uU(48," Guardar "),e.qZA()()()),2&o){let a,l,m,g,f,h;e.xp6(2),e.Q6J("formGroup",n.form),e.xp6(8),e.Q6J("ngIf",(null==(a=n.form.get("nombres"))?null:a.hasError("required"))&&(null==(a=n.form.get("nombres"))?null:a.touched)),e.xp6(1),e.Q6J("ngIf",null==(l=n.form.get("nombres"))?null:l.hasError("maxlength")),e.xp6(7),e.Q6J("ngIf",(null==(m=n.form.get("apellidos"))?null:m.hasError("required"))&&(null==(m=n.form.get("apellidos"))?null:m.touched)),e.xp6(6),e.Q6J("ngForOf",n._paises),e.xp6(2),e.Q6J("ngIf",(null==(g=n.form.get("idpais"))?null:g.hasError("required"))&&(null==(g=n.form.get("idpais"))?null:g.touched)),e.xp6(7),e.Q6J("ngForOf",n._tropas),e.xp6(2),e.Q6J("ngIf",(null==(f=n.form.get("idtropa"))?null:f.hasError("required"))&&(null==(f=n.form.get("idtropa"))?null:f.touched)),e.xp6(6),e.Q6J("ngForOf",n._capitanes),e.xp6(2),e.Q6J("ngIf",(null==(h=n.form.get("idcapitan"))?null:h.hasError("required"))&&(null==(h=n.form.get("idcapitan"))?null:h.touched)),e.xp6(2),e.Q6J("routerLink",e.DdM(11,Ce))}},dependencies:[d.ez,d.sg,d.O5,u.Is,u.uh,_.ot,_.lW,b.c,b.Nt,p.KE,p.hX,A.LD,A.gD,N.ey,q.FA,r.u5,r._Y,r.Fj,r.JJ,r.JL,r.UX,r.sg,r.u,C.Bz,C.rH],styles:[".mat-mdc-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%;margin-right:10px}.error[_ngcontent-%COMP%]{color:#f44336;margin-top:-10px;font-size:14px}.m-btnaceptar[_ngcontent-%COMP%]{margin:0 15px}.m-btncanel[_ngcontent-%COMP%]{margin:0 30px}"]}),t})();function qe(t,i){1&t&&(e.TgZ(0,"span"),e._uU(1,"El registro es "),e.TgZ(2,"strong"),e._uU(3,"requerido"),e.qZA()())}function xe(t,i){if(1&t&&(e.TgZ(0,"mat-radio-button",23),e._uU(1),e.qZA()),2&t){const o=i.$implicit;e.Q6J("value",o.id),e.xp6(1),e.Oqu(o.name)}}function Se(t,i){if(1&t&&(e.TgZ(0,"mat-radio-button",23),e._uU(1),e.qZA()),2&t){const o=i.$implicit;e.Q6J("value",o.id),e.xp6(1),e.Oqu(o.name)}}function Ue(t,i){if(1&t&&(e.TgZ(0,"mat-radio-button",23),e._uU(1),e.qZA()),2&t){const o=i.$implicit;e.Q6J("value",o.id),e.xp6(1),e.Oqu(o.name)}}let Ne=(()=>{class t{constructor(o){this.data=o,this.actionProcess="",this.fb=(0,e.f3M)(r.qu),this.dialogRef=(0,e.f3M)(u.so),this._ayuna=[{id:0,name:"No"},{id:1,name:"Si"}],this._oracion=[{id:0,name:"No"},{id:1,name:"Si"}],this._socializa=[{id:0,name:"No"},{id:1,name:"Si"}],console.log("DATA MODAL",o),this.actionProcess=o.action,this._infoUpdate=o.info.guerrero}ngOnInit(){this.initializeValidations(),this.form.controls.nombres.disable()}initializeValidations(){this.form=this.fb.nonNullable.group({id:[null],nombres:[""],ayuna:[""],oracion:[""],socializa:[""],examen:[null,r.kI.required],observacion:[null]}),this.form.setValue({id:this._infoUpdate.id??0,nombres:this._infoUpdate.nombres+" "+this._infoUpdate.apellidos,ayuna:this._infoUpdate.ayuna??null,oracion:this._infoUpdate.ora??null,socializa:this._infoUpdate.socializa??null,examen:this._infoUpdate.examen??null,observacion:this._infoUpdate.observacion??null})}EditPerson(){this.form.invalid||this.dialogRef.close({action:this.actionProcess,data:{idguerrero:this.form.value.id??null,ayuna:this.form.value.ayuna,ora:this.form.value.oracion,socializa:this.form.value.socializa,examen:this.form.value.examen,observacion:this.form.value.observacion}})}deleteItem(){this.dialogRef.close({action:"delete",data:this.form.value.id})}cancelar(){this.dialogRef.close({action:"cancel"})}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(u.WI,8))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-edit-modal"]],standalone:!0,features:[e.jDz],decls:52,vars:5,consts:[["mat-dialog-title","",1,"text-center"],[3,"formGroup"],[1,"mat-typography"],[1,"row"],[1,"col"],["formControlName","nombres","matInput","","placeholder","Ingrese Nombre","autocomplete","off",1,"fw-bold"],["type","number","matInput","","formControlName","examen"],[1,"error"],[4,"ngIf"],[1,"row","container"],[1,"col","text-center"],[1,"mx-5","fw-bold"],[1,"mt-1"],["aria-label","Select an option","formControlName","ayuna"],[3,"value",4,"ngFor","ngForOf"],["aria-label","Select an option","formControlName","oracion"],["aria-label","Select an option","formControlName","socializa"],["type","text","matInput","","formControlName","observacion"],[1,"mx-4"],["type","submit","mat-mini-fab","","color","warn",1,"float-start",3,"click"],["align","end",1,"m-buttons"],["type","button","mat-button","","color","warn",1,"m-btncanel","mx-4",3,"click"],["type","submit","mat-button","","cdkFocusInitial","","color","primary",1,"m-btnaceptar",3,"click"],[3,"value"]],template:function(o,n){if(1&o&&(e.TgZ(0,"h2",0),e._uU(1,"Informaci\xf3n del guerrero"),e.qZA(),e.TgZ(2,"form",1)(3,"mat-dialog-content",2)(4,"div",3)(5,"div",4)(6,"mat-form-field")(7,"mat-label"),e._uU(8,"Nombre"),e.qZA(),e._UZ(9,"input",5),e.qZA()(),e.TgZ(10,"div",4)(11,"mat-form-field")(12,"mat-label"),e._uU(13,"Exam\xe9n"),e.qZA(),e._UZ(14,"input",6),e.qZA(),e.TgZ(15,"div",7),e.YNc(16,qe,4,0,"span",8),e.qZA()()(),e.TgZ(17,"div",3)(18,"div",9)(19,"div",10)(20,"mat-label",11),e._uU(21,"Ayuna"),e.qZA(),e.TgZ(22,"div",12)(23,"mat-radio-group",13),e.YNc(24,xe,2,2,"mat-radio-button",14),e.qZA()()(),e.TgZ(25,"div",10)(26,"mat-label",11),e._uU(27,"Oraci\xf3n"),e.qZA(),e.TgZ(28,"div",12)(29,"mat-radio-group",15),e.YNc(30,Se,2,2,"mat-radio-button",14),e.qZA()()(),e.TgZ(31,"div",10)(32,"mat-label",11),e._uU(33,"Socializa"),e.qZA(),e.TgZ(34,"div",12)(35,"mat-radio-group",16),e.YNc(36,Ue,2,2,"mat-radio-button",14),e.qZA()()()()(),e.TgZ(37,"div",3)(38,"div",4)(39,"mat-form-field")(40,"mat-label"),e._uU(41,"Observaci\xf3n"),e.qZA(),e._UZ(42,"input",17),e.qZA()()()(),e.TgZ(43,"div",18)(44,"button",19),e.NdJ("click",function(){return n.deleteItem()}),e.TgZ(45,"mat-icon"),e._uU(46,"delete_forever"),e.qZA()()(),e.TgZ(47,"mat-dialog-actions",20)(48,"button",21),e.NdJ("click",function(){return n.cancelar()}),e._uU(49," Cancelar "),e.qZA(),e.TgZ(50,"button",22),e.NdJ("click",function(){return n.EditPerson()}),e._uU(51," Aceptar "),e.qZA()()()),2&o){let a;e.xp6(2),e.Q6J("formGroup",n.form),e.xp6(14),e.Q6J("ngIf",(null==(a=n.form.get("examen"))?null:a.hasError("required"))&&(null==(a=n.form.get("examen"))?null:a.touched)),e.xp6(8),e.Q6J("ngForOf",n._ayuna),e.xp6(6),e.Q6J("ngForOf",n._oracion),e.xp6(6),e.Q6J("ngForOf",n._socializa)}},dependencies:[d.ez,d.sg,d.O5,u.Is,u.uh,u.xY,u.H8,_.ot,_.lW,_.nh,b.c,b.Nt,p.KE,p.hX,A.LD,q.FA,r.u5,r._Y,r.Fj,r.wV,r.JJ,r.JL,r.UX,r.sg,r.u,E.N6,T.Fk,T.VQ,T.U0,U.Ps,U.Hw],styles:[".error[_ngcontent-%COMP%]{color:#f44336;margin-top:-10px;font-size:14px}.mat-mdc-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%;margin-right:10px}.mat-mdc-radio-button[_ngcontent-%COMP%] ~ .mat-mdc-radio-button[_ngcontent-%COMP%]{margin-left:16px}.m-btnaceptar[_ngcontent-%COMP%], .m-btncancel[_ngcontent-%COMP%]{margin:0 15px}"]}),t})();var Ge=s(4850);function Me(t,i){if(1&t&&(e.TgZ(0,"mat-option",23),e._uU(1),e.qZA()),2&t){const o=i.$implicit;e.Q6J("value",o),e.xp6(1),e.AsE(" ",o.nombres," ",o.apellidos," ")}}function ye(t,i){1&t&&(e.TgZ(0,"span"),e._uU(1,"El capit\xe1n es "),e.TgZ(2,"strong"),e._uU(3,"requerido"),e.qZA()())}function Je(t,i){if(1&t&&(e.TgZ(0,"mat-option",23),e._uU(1),e.qZA()),2&t){const o=i.$implicit;e.Q6J("value",o.id),e.xp6(1),e.hij(" ",o.descripcion," ")}}function Ee(t,i){if(1&t&&(e.TgZ(0,"mat-option",23),e._uU(1),e.qZA()),2&t){const o=i.$implicit;e.Q6J("value",o.id),e.xp6(1),e.hij(" ",o.nombre," ")}}function ke(t,i){1&t&&(e.TgZ(0,"span"),e._uU(1,"El taller es "),e.TgZ(2,"strong"),e._uU(3,"requerido"),e.qZA()())}function Oe(t,i){1&t&&(e.TgZ(0,"span"),e._uU(1,"El fechaNacimiento es "),e.TgZ(2,"strong"),e._uU(3,"requerido"),e.qZA()())}function Qe(t,i){if(1&t&&(e.TgZ(0,"mat-radio-button",23),e._uU(1),e.qZA()),2&t){const o=i.$implicit;e.Q6J("value",o.id),e.xp6(1),e.Oqu(o.name)}}function Ie(t,i){if(1&t&&(e.TgZ(0,"mat-radio-button",23),e._uU(1),e.qZA()),2&t){const o=i.$implicit;e.Q6J("value",o.id),e.xp6(1),e.Oqu(o.name)}}function Ye(t,i){1&t&&(e.TgZ(0,"span"),e._uU(1,"El registro es "),e.TgZ(2,"strong"),e._uU(3,"requerido"),e.qZA()())}function Pe(t,i){if(1&t&&(e.TgZ(0,"mat-radio-button",23),e._uU(1),e.qZA()),2&t){const o=i.$implicit;e.Q6J("value",o.id),e.xp6(1),e.Oqu(o.name)}}function De(t,i){1&t&&(e.TgZ(0,"span"),e._uU(1,"El registro es "),e.TgZ(2,"strong"),e._uU(3,"requerido"),e.qZA()())}function ze(t,i){1&t&&(e.TgZ(0,"span"),e._uU(1,"El registro es "),e.TgZ(2,"strong"),e._uU(3,"requerido"),e.qZA()())}const G=function(t){return{invalid:t}};function Fe(t,i){if(1&t&&(e.TgZ(0,"div")(1,"div",24)(2,"div",25)(3,"mat-label",26),e._uU(4,"Ayuna"),e.qZA(),e.TgZ(5,"div",27)(6,"mat-radio-group",28),e.YNc(7,Qe,2,2,"mat-radio-button",9),e.qZA()()(),e.TgZ(8,"div",25)(9,"mat-label",26),e._uU(10,"Oraci\xf3n"),e.qZA(),e.TgZ(11,"div",27)(12,"mat-radio-group",29),e.YNc(13,Ie,2,2,"mat-radio-button",9),e.qZA(),e.TgZ(14,"div",10),e.YNc(15,Ye,4,0,"span",11),e.qZA()()(),e.TgZ(16,"div",25)(17,"mat-label",26),e._uU(18,"Socializa"),e.qZA(),e.TgZ(19,"div",27)(20,"mat-radio-group",30),e.YNc(21,Pe,2,2,"mat-radio-button",9),e.qZA(),e.TgZ(22,"div",10),e.YNc(23,De,4,0,"span",11),e.qZA()()()(),e.TgZ(24,"div",31)(25,"div",32)(26,"mat-form-field")(27,"mat-label"),e._uU(28,"Exam\xe9n"),e.qZA(),e._UZ(29,"input",33),e.qZA(),e.TgZ(30,"div",10),e.YNc(31,ze,4,0,"span",11),e.qZA()(),e.TgZ(32,"div",34)(33,"mat-form-field")(34,"mat-label"),e._uU(35,"Observaci\xf3n"),e.qZA(),e._UZ(36,"input",35),e.qZA()()()()),2&t){const o=e.oxw();let n,a,l;e.xp6(3),e.Q6J("ngClass",e.VKq(9,G,o.form.get("ayuna").invalid)),e.xp6(4),e.Q6J("ngForOf",o._ayuna),e.xp6(2),e.Q6J("ngClass",e.VKq(11,G,o.form.get("oracion").invalid)),e.xp6(4),e.Q6J("ngForOf",o._oracion),e.xp6(2),e.Q6J("ngIf",(null==(n=o.form.get("oracion"))?null:n.hasError("required"))&&(null==(n=o.form.get("oracion"))?null:n.touched)),e.xp6(2),e.Q6J("ngClass",e.VKq(13,G,o.form.get("socializa").invalid)),e.xp6(4),e.Q6J("ngForOf",o._socializa),e.xp6(2),e.Q6J("ngIf",(null==(a=o.form.get("socializa"))?null:a.hasError("required"))&&(null==(a=o.form.get("socializa"))?null:a.touched)),e.xp6(8),e.Q6J("ngIf",(null==(l=o.form.get("examen"))?null:l.hasError("required"))&&(null==(l=o.form.get("examen"))?null:l.touched))}}function Le(t,i){1&t&&(e.TgZ(0,"th",54),e._uU(1,"Fecha"),e.qZA())}function we(t,i){if(1&t&&(e.TgZ(0,"td",55),e._uU(1),e.qZA()),2&t){const o=i.$implicit;e.xp6(1),e.Oqu(o.fecha)}}function Re(t,i){1&t&&(e.TgZ(0,"th",54),e._uU(1,"Nombre"),e.qZA())}function Be(t,i){if(1&t&&(e.TgZ(0,"td",55),e._uU(1),e.qZA()),2&t){const o=i.$implicit;e.xp6(1),e.AsE(" ",o.nombres," ",o.apellidos," ")}}function $e(t,i){1&t&&(e.TgZ(0,"th",54),e._uU(1,"Taller"),e.qZA())}function je(t,i){if(1&t&&(e.TgZ(0,"td",55),e._uU(1),e.qZA()),2&t){const o=i.$implicit;e.xp6(1),e.hij(" ",o.nombretaller," ")}}function He(t,i){1&t&&(e.TgZ(0,"th",56),e._uU(1,"Ayuna"),e.qZA())}function Ve(t,i){if(1&t&&(e.TgZ(0,"td",55),e._uU(1),e.qZA()),2&t){const o=i.$implicit;e.xp6(1),e.hij(" ",1===o.ayuna?"Si":"No"," ")}}function Xe(t,i){1&t&&(e.TgZ(0,"th",56),e._uU(1,"Oraci\xf3n"),e.qZA())}function We(t,i){if(1&t&&(e.TgZ(0,"td",55),e._uU(1),e.qZA()),2&t){const o=i.$implicit;e.xp6(1),e.hij(" ",1===o.ora?"Si":"No"," ")}}function Ke(t,i){1&t&&(e.TgZ(0,"th",56),e._uU(1,"Socializa"),e.qZA())}function et(t,i){if(1&t&&(e.TgZ(0,"td",55),e._uU(1),e.qZA()),2&t){const o=i.$implicit;e.xp6(1),e.hij(" ",1===o.socializa?"Si":"No"," ")}}function tt(t,i){1&t&&(e.TgZ(0,"th",56),e._uU(1,"Exam\xe9n"),e.qZA())}function ot(t,i){if(1&t&&(e.TgZ(0,"td",55),e._uU(1),e.qZA()),2&t){const o=i.$implicit;e.xp6(1),e.hij(" ",o.examen," ")}}function nt(t,i){1&t&&(e.TgZ(0,"th",56),e._uU(1,"Observaci\xf3n"),e.qZA())}function it(t,i){if(1&t&&(e.TgZ(0,"td",55),e._uU(1),e.qZA()),2&t){const o=i.$implicit;e.xp6(1),e.hij(" ",o.observacion," ")}}function at(t,i){1&t&&e._UZ(0,"th",56)}function rt(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"td",55)(1,"mat-icon",57),e.NdJ("click",function(){const l=e.CHM(o).$implicit,m=e.oxw(2);return e.KtG(m.EditPerson("editar",l))}),e._uU(2,"edit"),e.qZA()()}}function lt(t,i){1&t&&e._UZ(0,"tr",58)}function st(t,i){1&t&&e._UZ(0,"tr",59)}const mt=function(){return[5,10,25,100]};function ct(t,i){if(1&t&&(e.TgZ(0,"mat-card",36)(1,"mat-card-content")(2,"div",37)(3,"table",38),e.ynx(4,39),e.YNc(5,Le,2,0,"th",40),e.YNc(6,we,2,1,"td",41),e.BQk(),e.ynx(7,42),e.YNc(8,Re,2,0,"th",40),e.YNc(9,Be,2,2,"td",41),e.BQk(),e.ynx(10,43),e.YNc(11,$e,2,0,"th",40),e.YNc(12,je,2,1,"td",41),e.BQk(),e.ynx(13,44),e.YNc(14,He,2,0,"th",45),e.YNc(15,Ve,2,1,"td",41),e.BQk(),e.ynx(16,46),e.YNc(17,Xe,2,0,"th",45),e.YNc(18,We,2,1,"td",41),e.BQk(),e.ynx(19,47),e.YNc(20,Ke,2,0,"th",45),e.YNc(21,et,2,1,"td",41),e.BQk(),e.ynx(22,48),e.YNc(23,tt,2,0,"th",45),e.YNc(24,ot,2,1,"td",41),e.BQk(),e.ynx(25,49),e.YNc(26,nt,2,0,"th",45),e.YNc(27,it,2,1,"td",41),e.BQk(),e.ynx(28,50),e.YNc(29,at,1,0,"th",45),e.YNc(30,rt,3,0,"td",41),e.BQk(),e.YNc(31,lt,1,0,"tr",51),e.YNc(32,st,1,0,"tr",52),e.qZA(),e._UZ(33,"mat-paginator",53),e.qZA()()()),2&t){const o=e.oxw();e.xp6(3),e.Q6J("dataSource",o.dataSource),e.xp6(28),e.Q6J("matHeaderRowDef",o.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",o.displayedColumns),e.xp6(1),e.Q6J("pageSizeOptions",e.DdM(4,mt))}}const k=function(){return{standalone:!0}},ut=[{path:"Guerreros",title:"Listado Guerreros",component:ee},{path:"addGuerrero",title:"Agregar nuevo guerrero",component:Ae},{path:"Seguimiento",title:"Seguimiento al guerrero",component:(()=>{class t{constructor(){this._apiService=(0,e.f3M)(Z.sM),this._dataService=(0,e.f3M)(Z.gh),this._snackbarService=(0,e.f3M)(Z.o),this.datePipe=(0,e.f3M)(d.uU),this.fb=(0,e.f3M)(r.qu),this._guerreros=[],this._niveles=[],this.showDatos=!1,this.showTableList=!1,this.arrayInfo=[],this.dialog=(0,e.f3M)(u.uw),this.msgRequiredGuerrero=!1,this._ayuna=[{id:0,name:"No"},{id:1,name:"Si"}],this._oracion=[{id:0,name:"No"},{id:1,name:"Si"}],this._socializa=[{id:0,name:"No"},{id:1,name:"Si"}],this.horizontalPosition="start",this.verticalPosition="bottom",this.displayedColumns=["fecha","nombres","nombretaller","ayuna","ora","socializa","examen","observacion","acciones"],this.dataSource=new c.by}ngOnInit(){this.maxDate=new Date,this.initializeValidations(),this.data$=this._dataService.sharingObservable,this._subcriptionList=this.data$.subscribe(o=>{this.idTropa=o?.idtropa,this._idcapitan=o?.idcapitan,this.getListadoguerreros(o?.idtropa)})}initializeValidations(){this.form=this.fb.nonNullable.group({id:[null],taller:[null,r.kI.required],fecha:[null,r.kI.required],ayuna:[null,r.kI.required],oracion:[null,r.kI.required],socializa:[null,r.kI.required],examen:[null,r.kI.required],observacion:[null]})}getListadoguerreros(o){this._apiService.getGuerrerosIdTropa(o).subscribe({next:n=>{this._guerreros=n},complete:()=>{this.getNivelesCapitan(this._idcapitan)},error:n=>{console.log("error",n)}})}getNivelesCapitan(o){this._apiService.getNivelesXCapitan(o).subscribe({next:n=>{this._niveles=n},error:n=>{console.log("Error",n)}})}changeGuerrero(){this.showDatos=!0}changeNivel(o){this._apiService.getTalleres(o.value).subscribe({next:n=>{this._talleres=n},error:n=>{console.log("error",n)}})}addSeguimiento(){if(this.form.invalid)return;let o={idguerrero:this.selectGuerrero.id,idtaller:this.form.value.taller,idtropa:this.selectGuerrero.idtropa,fecha:this.datePipe.transform(this.form.value.fecha,"MM/dd/yyyy"),ayuna:this.form.value.ayuna,ora:this.form.value.oracion,socializa:this.form.value.socializa,examen:this.form.value.examen,observacion:this.form.value.observacion};this._apiService.addSeguimiento(o).subscribe({next:n=>{"El registro ya existe!."===n.msg?this._snackbarService.openSnackBar(n.msg,"red"):(this._snackbarService.openSnackBar(n.msg,"green"),this.getSeguimiento(this.idTropa)),this.clearControls()},error:n=>{this._snackbarService.openSnackBar("Error guardando la informaci\xf3n!.","red"),console.log("error",n)}})}getSeguimiento(o){let n=this.datePipe.transform(this.form.value.fecha,"MM/dd/yyyy");this._apiService.getSeguimientoByTropa(o,n).subscribe({next:a=>{if(a.msg)return this._snackbarService.openSnackBar(a.msg,"blue"),void(this.showTableList=!1);this.showTableList=!0,this.dataSource.data=a.data,setTimeout(()=>{this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort},0)},error:a=>{this.showTableList=!1,console.log("Error",a)}})}BuscarRegistros(){this.getSeguimiento(this.idTropa)}EditPerson(o,n){this.arrayInfo=Object.assign({guerrero:n}),this.dialog.open(Ne,{data:{action:o,info:this.arrayInfo},width:"750px",disableClose:!0}).afterClosed().subscribe(l=>{"cancel"!==l.action&&("editar"===l.action?this.updateSeguimiento(l.data.idguerrero,l.data):"delete"===l.action&&this.deleteSeguimiento(l.data))})}updateSeguimiento(o,n){this._apiService.updateSeguimiento(o,n).subscribe({next:a=>{this.getSeguimiento(this.idTropa),this._snackbarService.openSnackBar(a.msg,"green")},error:a=>{console.log("Error",a.msg),this._snackbarService.openSnackBar(a.msg,"red")}})}deleteSeguimiento(o){this._apiService.deleteSeguimiento(o).subscribe({next:n=>{this.getSeguimiento(this.idTropa),this._snackbarService.openSnackBar(n.msg,"green")},error:n=>{console.log("Error",n.msg),this._snackbarService.openSnackBar(n.msg,"red")}})}ngOnDestroy(){this._subcriptionList&&this._subcriptionList.unsubscribe()}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}clearControls(){this.showDatos=!1,this.selectGuerrero=null,this.form.controls.oracion.reset(),this.form.controls.ayuna.reset(),this.form.controls.socializa.reset(),this.form.controls.observacion.reset(),this.form.controls.examen.reset()}}return t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-seguimiento-guerrero"]],viewQuery:function(o,n){if(1&o&&(e.Gf(x.NW,5),e.Gf(v.YE,5)),2&o){let a;e.iGM(a=e.CRH())&&(n.paginator=a.first),e.iGM(a=e.CRH())&&(n.sort=a.first)}},standalone:!0,features:[e.jDz],decls:51,vars:18,consts:[[1,"mat-elevation-z8"],[3,"formGroup","ngSubmit"],["ngForm","ngForm"],[1,"container"],[1,"text-center"],[1,"row"],[1,"col-8"],["appearance","fill"],[3,"ngModel","ngModelOptions","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"error"],[4,"ngIf"],[1,"col-4"],["formControlName","taller"],["formControlName","fecha","matInput","",3,"max","matDatepicker"],["matIconSuffix","",3,"for"],["picker",""],[1,"float-start","mx-4","mb-2"],["mat-raised-button","","type","submit",3,"click"],[1,"float-end","mx-4","mb-2"],["mat-raised-button","","color","primary","type","submit"],[1,"p-3"],["class","mat-elevation-z8","style","background-color: rgb(206, 210, 214)",4,"ngIf"],[3,"value"],[1,"row","container"],[1,"col","text-center"],[1,"mx-5","fw-bold",3,"ngClass"],[1,"mt-1"],["aria-label","Select an option","formControlName","ayuna"],["aria-label","Select an option","formControlName","oracion"],["aria-label","Select an option","formControlName","socializa"],[1,"row","mt-4"],[1,"col-2"],["type","number","matInput","","formControlName","examen"],[1,"col-10"],["type","text","matInput","","formControlName","observacion"],[1,"mat-elevation-z8",2,"background-color","rgb(206, 210, 214)"],[1,"scroll-container"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","fecha","sticky",""],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","nombres"],["matColumnDef","nombretaller"],["matColumnDef","ayuna"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","ora"],["matColumnDef","socializa"],["matColumnDef","examen"],["matColumnDef","observacion"],["matColumnDef","acciones","stickyEnd",""],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["aria-label","Select page of users",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["matTooltip","Editar",1,"btnEdit",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(o,n){if(1&o&&(e.TgZ(0,"mat-card",0)(1,"form",1,2),e.NdJ("ngSubmit",function(){return n.addSeguimiento()}),e.TgZ(3,"div",3)(4,"mat-card-content")(5,"h2",4),e._uU(6,"Seguimiento de las tropas por taller"),e.qZA(),e.TgZ(7,"div",5)(8,"div",6)(9,"mat-form-field",7)(10,"mat-label"),e._uU(11,"Guerreros"),e.qZA(),e.TgZ(12,"mat-select",8),e.NdJ("ngModelChange",function(l){return n.selectGuerrero=l})("selectionChange",function(){return n.changeGuerrero()}),e.YNc(13,Me,2,3,"mat-option",9),e.qZA()(),e.TgZ(14,"div",10),e.YNc(15,ye,4,0,"span",11),e.qZA()(),e.TgZ(16,"div",12)(17,"mat-form-field")(18,"mat-label"),e._uU(19,"Niveles"),e.qZA(),e.TgZ(20,"mat-select",8),e.NdJ("ngModelChange",function(l){return n.selectNivel=l})("selectionChange",function(l){return n.changeNivel(l)}),e.TgZ(21,"mat-option"),e._uU(22,"None"),e.qZA(),e.YNc(23,Je,2,2,"mat-option",9),e.qZA()()(),e.TgZ(24,"div",6)(25,"mat-form-field")(26,"mat-label"),e._uU(27,"Talleres"),e.qZA(),e.TgZ(28,"mat-select",13),e.YNc(29,Ee,2,2,"mat-option",9),e.qZA()(),e.TgZ(30,"div",10),e.YNc(31,ke,4,0,"span",11),e.qZA()(),e.TgZ(32,"div",12)(33,"mat-form-field",7)(34,"mat-label"),e._uU(35,"Fecha Registro"),e.qZA(),e._UZ(36,"input",14)(37,"mat-datepicker-toggle",15)(38,"mat-datepicker",null,16),e.qZA(),e.TgZ(40,"div",10),e.YNc(41,Oe,4,0,"span",11),e.qZA()()(),e.YNc(42,Fe,37,15,"div",11),e.qZA()(),e.TgZ(43,"div",17)(44,"button",18),e.NdJ("click",function(){return n.BuscarRegistros()}),e._uU(45," Buscar "),e.qZA()(),e.TgZ(46,"div",19)(47,"button",20),e._uU(48,"Guardar"),e.qZA()()()(),e._UZ(49,"mat-divider",21),e.YNc(50,ct,34,5,"mat-card",22)),2&o){const a=e.MAs(39);let l,m;e.xp6(1),e.Q6J("formGroup",n.form),e.xp6(11),e.Q6J("ngModel",n.selectGuerrero)("ngModelOptions",e.DdM(16,k)),e.xp6(1),e.Q6J("ngForOf",n._guerreros),e.xp6(2),e.Q6J("ngIf",n.msgRequiredGuerrero),e.xp6(5),e.Q6J("ngModel",n.selectNivel)("ngModelOptions",e.DdM(17,k)),e.xp6(3),e.Q6J("ngForOf",n._niveles),e.xp6(6),e.Q6J("ngForOf",n._talleres),e.xp6(2),e.Q6J("ngIf",(null==(l=n.form.get("taller"))?null:l.hasError("required"))&&(null==(l=n.form.get("taller"))?null:l.touched)),e.xp6(5),e.Q6J("max",n.maxDate)("matDatepicker",a),e.xp6(1),e.Q6J("for",a),e.xp6(4),e.Q6J("ngIf",(null==(m=n.form.get("fecha"))?null:m.hasError("required"))&&(null==(m=n.form.get("fecha"))?null:m.touched)),e.xp6(1),e.Q6J("ngIf",n.showDatos),e.xp6(8),e.Q6J("ngIf",n.showTableList)}},dependencies:[d.ez,d.mk,d.sg,d.O5,y.q,S.a8,S.dn,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,x.NW,v.YE,v.nU,p.KE,p.hX,p.R9,b.Nt,U.Hw,J.gM,_.lW,A.gD,N.ey,q.Mq,q.hl,q.nW,T.VQ,T.U0,Ge.d,C.Bz,r.u5,r._Y,r.Fj,r.wV,r.JJ,r.JL,r.On,r.UX,r.sg,r.u],styles:[".mat-mdc-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%;margin-right:10px}.error[_ngcontent-%COMP%]{color:#f44336;margin-top:-10px;font-size:14px}.bg-option[_ngcontent-%COMP%]{background:#f5f5f5}.invalid[_ngcontent-%COMP%]{color:#f44336}.scroll-container[_ngcontent-%COMP%]{overflow:auto;background:#fff}.mat-mdc-table[_ngcontent-%COMP%]   .mdc-data-table__row[_ngcontent-%COMP%]{height:40px}.mdc-data-table__cell[_ngcontent-%COMP%], .mdc-data-table__header-cell[_ngcontent-%COMP%]{padding:0 11px 0 10px;font-size:12px}.btnEdit[_ngcontent-%COMP%]{color:#86cd4b}.btnEdit[_ngcontent-%COMP%]{cursor:pointer}.mat-mdc-raised-button.mat-unthemed[_ngcontent-%COMP%]{--mdc-protected-button-container-color: #e1d7d7;--mdc-protected-button-label-text-color: #000}"]}),t})()}]}}]);